<script language="JavaScript">
	$(".category").click(function() {
  $(this).prevAll(".category").each(function() {
    $(this).removeClass("selected");
    $(this).children(".sub-category-holder").hide();
    return $(this).slideUp('fast');
  });
  $(this).addClass("selected");
  $(this).children(".sub-category-holder").show();
  $.ajax({
    url: $(this).children("a").attr("href"),
    type: "GET",
    data: $(this).serialize(),
    dataType: "json",
    success: function(response) {
      return $(this).children(".sub-category-holder").html(response.html);
    }
  });
  return false;
});
</script>
<% @categories.each do |category| %>
	<li class="category">
		<%= link_to category.name, get_sub_categories_search_index_path(:id => category.id ) %>
		<div class="sub-category-holder" style="display:none;">
			<%= render :partial => "/search/sub_categories" %>
		</div>
	</li>
<%end%>